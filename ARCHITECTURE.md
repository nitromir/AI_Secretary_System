# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° AI Secretary System

## ĞĞ±Ğ·Ğ¾Ñ€ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² (2026-01-29)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AI SECRETARY SYSTEM                                â”‚
â”‚                  (Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµĞºÑ€ĞµÑ‚Ğ°Ñ€ÑŒ Ñ voice cloning)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Telegram   â”‚  â”‚    Widget    â”‚  â”‚   Twilio     â”‚  â”‚  SIM7600G-H  â”‚
â”‚     Bot      â”‚  â”‚   (Website)  â”‚  â”‚  (Cloud)     â”‚  â”‚  GSM Modem   â”‚
â”‚  (multi-bot) â”‚  â”‚ (multi-inst) â”‚  â”‚              â”‚  â”‚  (planned)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                 â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ORCHESTRATOR (port 8002)                              â”‚
â”‚              orchestrator.py + app/routers/ (11 routers)                â”‚
â”‚                        ~115 API endpoints                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   Vue 3 Admin Panel (13 tabs, PWA)                  â”‚ â”‚
â”‚  â”‚                          admin/dist/                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           â”‚               â”‚               â”‚               â”‚
      v           v               v               v               v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   vLLM   â”‚ â”‚  Cloud   â”‚  â”‚  XTTS v2  â”‚  â”‚   Piper   â”‚  â”‚   Vosk/   â”‚
â”‚  Local   â”‚ â”‚   LLM    â”‚  â”‚  Voice    â”‚  â”‚   TTS     â”‚  â”‚  Whisper  â”‚
â”‚   LLM    â”‚ â”‚ Factory  â”‚  â”‚  Clone    â”‚  â”‚  (CPU)    â”‚  â”‚   STT     â”‚
â”‚          â”‚ â”‚          â”‚  â”‚           â”‚  â”‚           â”‚  â”‚           â”‚
â”‚ Qwen2.5  â”‚ â”‚ Gemini   â”‚  â”‚ Streaming â”‚  â”‚ ONNX      â”‚  â”‚ Realtime  â”‚
â”‚ + LoRA   â”‚ â”‚ OpenAI   â”‚  â”‚ Synthesis â”‚  â”‚ Voices    â”‚  â”‚ + Batch   â”‚
â”‚          â”‚ â”‚ Claude   â”‚  â”‚ <500ms    â”‚  â”‚           â”‚  â”‚           â”‚
â”‚ ~6GB GPU â”‚ â”‚ DeepSeek â”‚  â”‚ TTFA      â”‚  â”‚ Fast CPU  â”‚  â”‚ ru-0.42   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ OpenRouterâ”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
     â”‚                           â”‚
     v                           v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RTX 3060  â”‚           â”‚ Audio Pipeline â”‚
â”‚  12GB VRAM â”‚           â”‚  8kHz PCM16    â”‚
â”‚  CUDA 12.x â”‚           â”‚  G.711 A-law   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  GSM frames    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ’Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ Ğ·Ğ²Ğ¾Ğ½Ğ¾Ğº

```
Ğ—Ğ²Ğ¾Ğ½Ğ¾Ğº â†’ Twilio
         â†“
    Phone Service (/incoming_call)
         â†“
    ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ (TwiML)
         â†“
    Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ñ€ĞµÑ‡Ğ¸ Ğ°Ğ±Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°
         â†“
    /handle_speech endpoint
```

### 2. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ²Ğ¾Ğ½ĞºĞ°

```
ĞÑƒĞ´Ğ¸Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ
    â†“
Orchestrator (/process_call)
    â†“
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. STT Service                  â”‚
â”‚    audio.wav â†’ text             â”‚
â”‚    "Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, ÑÑ‚Ğ¾ XYZ?"     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. LLM Service                  â”‚
â”‚    text â†’ response_text         â”‚
â”‚    "Ğ”Ğ°, ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ XYZ. Ğ§ĞµĞ¼ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?"â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. TTS Service                  â”‚
â”‚    response_text â†’ audio        â”‚
â”‚    "Ğ”Ğ°, ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ..." â†’ audio.wavâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ°ÑƒĞ´Ğ¸Ğ¾ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
    â†“
Phone Service
    â†“
Twilio â†’ ĞĞ±Ğ¾Ğ½ĞµĞ½Ñ‚Ñƒ
```

### 3. Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ²Ğ¾Ğ½Ğ¾Ğº ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² `calls_log/`:

```
calls_log/
â”œâ”€â”€ call_20240108_153045_input.wav      # Ğ’Ñ…Ğ¾Ğ´ÑÑ‰ĞµĞµ Ğ°ÑƒĞ´Ğ¸Ğ¾
â”œâ”€â”€ call_20240108_153045_output.wav     # ĞÑ‚Ğ²ĞµÑ‚ ÑĞµĞºÑ€ĞµÑ‚Ğ°Ñ€Ñ
â””â”€â”€ call_20240108_153045_transcript.txt # Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ğ°Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²ĞºĞ°
```

## Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

### Voice Clone Service (voice_clone_service.py)

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ**: Coqui TTS XTTS v2

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸**:
- Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ†Ğ¾Ğ² Ğ³Ğ¾Ğ»Ğ¾ÑĞ° Ğ¸Ğ· `./Ğ“ÑƒĞ»Ñ/` Ğ¸Ğ»Ğ¸ `./Ğ›Ğ¸Ğ´Ğ¸Ñ/`
- Few-shot voice cloning (3+ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ†Ğ°)
- **Batch ÑĞ¸Ğ½Ñ‚ĞµĞ·** Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
- **Streaming ÑĞ¸Ğ½Ñ‚ĞµĞ·** Ğ´Ğ»Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¸Ğ¸ (<500ms TTFA)
- ĞŸÑ€ĞµÑĞµÑ‚Ñ‹ Ğ¸Ğ½Ñ‚Ğ¾Ğ½Ğ°Ñ†Ğ¸Ğ¹ (warm, calm, energetic, natural, neutral)
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ speaker latents

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**:
- GPU: 5-6GB VRAM (RTX 3060 Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)
- ĞĞ±Ñ€Ğ°Ğ·Ñ†Ñ‹: 3+ WAV Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², Ñ‡Ğ¸ÑÑ‚Ğ°Ñ Ñ€ĞµÑ‡ÑŒ
- CUDA Compute Capability >= 7.0

**ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
| Ğ ĞµĞ¶Ğ¸Ğ¼ | Ğ›Ğ°Ñ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ | RTF |
|-------|-------------|-----|
| Batch | 2-4 ÑĞµĞº | 0.9x |
| Streaming TTFA | 300-500ms | 0.5-0.9x |

### Audio Pipeline (app/services/audio_pipeline.py)

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ**: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ°ÑƒĞ´Ğ¸Ğ¾ Ğ´Ğ»Ñ GSM Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¸Ğ¸

**ĞšĞ»Ğ°ÑÑÑ‹**:
- `TelephonyAudioPipeline` - ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ 24kHzâ†’8kHz, Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- `StreamingAudioBuffer` - ĞºĞ¾Ğ»ÑŒÑ†ĞµĞ²Ğ¾Ğ¹ Ğ±ÑƒÑ„ĞµÑ€ Ğ´Ğ»Ñ jitter smoothing

**GSM ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸**:
- Sample rate: 8000 Hz
- Bit depth: 16-bit signed PCM
- Frame size: 20ms (160 samples)
- ĞšĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: PCM16 Ğ¸Ğ»Ğ¸ G.711 A-law

### STT Service (stt_service.py)

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸**: Vosk (realtime) + Whisper (batch)

**Vosk (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¸Ğ¸)**:
- ĞœĞ¾Ğ´ĞµĞ»ÑŒ: `vosk-model-ru-0.42` (~1.5GB)
- Realtime Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ
- ĞĞ¸Ğ·ĞºĞ°Ñ Ğ»Ğ°Ñ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ

**Whisper (Ğ´Ğ»Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ³Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°)**:
- ĞœĞ¾Ğ´ĞµĞ»Ğ¸: tiny, base, small, medium, large
- Batch Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
- Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ

### LLM Service

**Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ (vLLM)**:
- ĞœĞ¾Ğ´ĞµĞ»ÑŒ: Qwen2.5-7B + Lydia LoRA
- ĞŸĞ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ: ~6GB VRAM (50% GPU)
- ĞŸĞµÑ€ÑĞ¾Ğ½Ñ‹: gulya, lidia

**Cloud LLM (fallback)**:
| ĞŸÑ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€ | ĞœĞ¾Ğ´ĞµĞ»Ğ¸ |
|-----------|--------|
| Gemini | gemini-2.0-flash, gemini-2.5-pro |
| OpenAI | gpt-4o-mini, gpt-4o |
| Claude | claude-3-haiku, claude-3-sonnet |
| DeepSeek | deepseek-chat |
| OpenRouter | 20+ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ |

### Telegram Bot Service

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ**: python-telegram-bot

**Multi-instance**:
- ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ LLM/TTS Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ±Ğ¾Ñ‚
- Whitelist Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞµÑÑĞ¸Ğ¸ Ñ‡Ğ°Ñ‚Ğ°
- Action buttons (ğŸ“, ğŸ“, ğŸ“Š)

### Widget Service

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ**: Ğ’ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¹ JS Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚

**Multi-instance**:
- ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚
- ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²Ğ½ĞµÑˆĞ½ĞµĞ³Ğ¾ Ğ²Ğ¸Ğ´Ğ°
- ĞĞ²Ñ‚Ğ¾Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ widget.js

## Streaming TTS Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Text     â”‚â”€â”€â”€â–¶â”‚   XTTS      â”‚â”€â”€â”€â–¶â”‚   Audio     â”‚â”€â”€â”€â–¶â”‚    GSM      â”‚
â”‚   Input     â”‚    â”‚  Streaming  â”‚    â”‚  Pipeline   â”‚    â”‚   Output    â”‚
â”‚             â”‚    â”‚  inference  â”‚    â”‚  8kHz PCM   â”‚    â”‚  20ms framesâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ ~50-200ms chunks
                         â”‚ with crossfade
                         v
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Resample   â”‚
                   â”‚ 24kHzâ†’8kHz  â”‚
                   â”‚   scipy     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸**:
- Time-to-first-audio (TTFA): <500ms target
- Chunk interval: ~100ms
- Crossfade overlap: 256 samples

## ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ

```
                    â”Œâ”€ Orchestrator 1 (GPU 1)
Load Balancer  â”€â”€â”€â”€â”€â”¼â”€ Orchestrator 2 (GPU 2)
                    â””â”€ Orchestrator 3 (CPU-only, Piper TTS)
```

### Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ

- Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ GPU Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ â†’ vLLM + XTTS Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾
- Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ CPU â†’ Piper TTS fallback
- SSD â†’ Ğ±Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

1. **Streaming TTS** - <500ms Ğ´Ğ¾ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ·Ğ²ÑƒĞºĞ°
2. **ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ speaker latents** - Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
3. **vLLM GPU split** - 50% GPU Ğ´Ğ»Ñ LLM, Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ´Ğ»Ñ TTS
4. **Crossfade** - Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ‡Ğ°Ğ½ĞºĞ°Ğ¼Ğ¸
5. **Audio buffering** - jitter smoothing Ğ´Ğ»Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¸Ğ¸

## Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### API Keys
- Ğ¥Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² `.env`
- ĞĞµ Ğ¿Ğ¾Ğ¿Ğ°Ğ´Ğ°ÑÑ‚ Ğ² git
- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

### Network
- HTTPS Ğ´Ğ»Ñ production
- API authentication tokens
- Rate limiting
- Firewall rules

### Data
- Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°ÑƒĞ´Ğ¸Ğ¾ Ğ² transit
- ĞĞ²Ñ‚Ğ¾ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ»Ğ¾Ğ³Ğ¾Ğ²
- ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

## ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸
- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ²
- Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ GPU/CPU
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

### Ğ›Ğ¾Ğ³Ğ¸
- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸: DEBUG, INFO, WARNING, ERROR
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¾Ğ²
- Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑĞ±Ğ¾Ñ€ (ELK, Loki)

## Deployment

### Development
```bash
./run.sh
```

### Production
```bash
docker-compose up -d
```

### CI/CD
```yaml
- Build Docker images
- Run tests
- Push to registry
- Deploy to servers
- Health checks
- Rollback if needed
```

## Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ

### Ğ‘ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸
- WebRTC Ğ´Ğ»Ñ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ½Ñ‹Ñ… Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ²
- Asterisk/FreeSWITCH Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑĞ·Ñ‹ĞºĞ¾Ğ²
- CRM Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ (Ğ‘Ğ¸Ñ‚Ñ€Ğ¸ĞºÑ24, AmoCRM)
- ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ (Google Calendar, Outlook)
- Email Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°
- SMS ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
- Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
- Sentiment analysis
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¾Ğ²
