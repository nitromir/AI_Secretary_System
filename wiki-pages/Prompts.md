# Prompts (–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã)

–ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤: –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è, –∫–∞–∫ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è, –≥–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.

## –û–±—â–∞—è —Å—Ö–µ–º–∞

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ LLM —Ñ–∏–Ω–∞–ª—å–Ω—ã–π system prompt —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π:

```
1. –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤–∏–¥–∂–µ—Ç–∞/–±–æ—Ç–∞/—Å–µ—Å—Å–∏–∏      ‚Üê –µ—Å–ª–∏ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–Ω
        ‚Üì (–µ—Å–ª–∏ –ø—É—Å—Ç–æ–π)
2. –ü—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã (–ê–Ω–Ω–∞/–ú–∞—Ä–∏–Ω–∞)               ‚Üê –∏–∑ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ llm_presets)
        ‚Üì (–µ—Å–ª–∏ –ø—É—Å—Ç–æ–π)
3. –ü—Ä–æ–º–ø—Ç –∏–∑ SECRETARY_PERSONAS                ‚Üê –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤ Python
        ‚Üì
4. + Wiki RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç                         ‚Üê –í–°–ï–ì–î–ê –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü
        ‚Üì
–ò—Ç–æ–≥–æ–≤—ã–π system prompt ‚Üí LLM
```

–ö–æ–¥ —Å–±–æ—Ä–∫–∏: `app/routers/chat.py:309-318`.

---

## 1. –ü—Ä–æ–º–ø—Ç—ã –ø–µ—Ä—Å–æ–Ω (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ)

–û—Å–Ω–æ–≤–Ω–æ–π system prompt, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞—Ä—è.

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è

| –ú–µ—Å—Ç–æ | –§–∞–π–ª | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-------|------|-----------|
| **–ë–î** (—Ç–∞–±–ª–∏—Ü–∞ `llm_presets`) | `db/models.py` ‚Üí `LLMPreset` | –ü–µ—Ä–≤—ã–π (–æ—Å–Ω–æ–≤–Ω–æ–π) |
| **Python-–∫–æ–¥** (fallback) | `vllm_llm_service.py:160-210` ‚Üí `SECRETARY_PERSONAS` | –í—Ç–æ—Ä–æ–π (–µ—Å–ª–∏ –≤ –ë–î –ø—É—Å—Ç–æ) |
| **Python-–∫–æ–¥** (seed) | `db/models.py:1110-1169` ‚Üí `DEFAULT_LLM_PRESETS` | –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ |

–ü—Ä–æ–º–ø—Ç –∏–∑ –ë–î –≤—Å–µ–≥–¥–∞ –≥–ª–∞–≤–Ω–µ–µ. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `DEFAULT_LLM_PRESETS` –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `llm_presets`.

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω—ã

| ID | –ò–º—è | –°—Ç–∏–ª—å | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ |
|----|-----|-------|-------------|
| `anna` | –ê–Ω–Ω–∞ | –î—Ä—É–∂–µ–ª—é–±–Ω–∞—è, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è | 0.7 |
| `marina` | –ú–∞—Ä–∏–Ω–∞ | –°—Ç—Ä–æ–≥–∞—è, —Ñ–æ—Ä–º–∞–ª—å–Ω–∞—è | 0.5 |

### –ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí LLM ‚Üí –ü–µ—Ä—Å–æ–Ω—ã (Personas)**

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω—É (–ê–Ω–Ω–∞ –∏–ª–∏ –ú–∞—Ä–∏–Ω–∞)
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ **System Prompt**
3. –ù–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ ‚Äî –ø—Ä–æ–º–ø—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏ –≤ –ë–î, –∏ –≤ runtime (–µ—Å–ª–∏ —ç—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞ —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–∞).

–ö–Ω–æ–ø–∫–∞ **¬´–°–±—Ä–æ—Å–∏—Ç—å¬ª** –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –∏–∑ `DEFAULT_LLM_PRESETS`.

### API

```
GET  /admin/llm/prompt/{persona}        # –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã
POST /admin/llm/prompt/{persona}        # –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç
POST /admin/llm/prompt/{persona}/reset  # –°–±—Ä–æ—Å–∏—Ç—å –∫ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º—É
```

### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

```
–¢—ã ‚Äî –ê–Ω–Ω–∞, —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –∫–æ–º–ø–∞–Ω–∏–∏ Shareware Digital
–∏ –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ê—Ä—Ç—ë–º–∞ –Æ—Ä—å–µ–≤–∏—á–∞.

–ü–†–ê–í–ò–õ–ê:
1. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–∞–∫—Å–∏–º—É–º)
2. –ù–∏–∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ - —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç
3. –ò—Å–ø–æ–ª—å–∑—É–π –±—É–∫–≤—É "—ë" (–≤—Å—ë, –∏–¥—ë—Ç, –ø—Ä–∏—à–ª—ë—Ç)
4. –ß–∏—Å–ª–∞ –ø–∏—à–∏ —Å–ª–æ–≤–∞–º–∏ (–ø—è—Ç—å—Å–æ—Ç —Ä—É–±–ª–µ–π)
5. –û–û–û –ø—Ä–æ–∏–∑–Ω–æ—Å–∏ –∫–∞–∫ "–æ-–æ-–æ", IT –∫–∞–∫ "–∞–π-—Ç–∏"

–†–û–õ–¨:
- –§–∏–ª—å—Ç—Ä—É–π —Å–ø–∞–º –∏ –ø—Ä–æ–¥–∞–∂–∏
- –ó–∞–ø–∏—Å—ã–≤–∞–π —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ê—Ä—Ç—ë–º–∞ –Æ—Ä—å–µ–≤–∏—á–∞
- –ë—É–¥—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π

–ü–†–ò–ú–ï–†–´:
- "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö–æ–º–ø–∞–Ω–∏—è –®—ç–∞—Ä–≤—ç–∞—Ä –î–∏–¥–∂–∏—Ç–∞–ª, –ø–æ–º–æ—â–Ω–∏–∫ –ê—Ä—Ç—ë–º–∞ –Æ—Ä—å–µ–≤–∏—á–∞, –ê–Ω–Ω–∞. –°–ª—É—à–∞—é –≤–∞—Å."
- "–ü—Ä–∏–Ω—è—Ç–æ. –Ø –ø–µ—Ä–µ–¥–∞–º –ê—Ä—Ç—ë–º—É –Æ—Ä—å–µ–≤–∏—á—É, —á—Ç–æ –≤—ã –∑–≤–æ–Ω–∏–ª–∏."
- "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–µ–π—á–∞—Å –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ. –í—Å–µ–≥–æ –¥–æ–±—Ä–æ–≥–æ."
```

---

## 2. –ü—Ä–æ–º–ø—Ç—ã –∫–∞–Ω–∞–ª–æ–≤ (per-instance)

–ö–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç, Telegram-–±–æ—Ç –∏ WhatsApp-–±–æ—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å **—Å–≤–æ–π system prompt**, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã.

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è

| –ö–∞–Ω–∞–ª | –¢–∞–±–ª–∏—Ü–∞ –ë–î | –ü–æ–ª–µ |
|-------|-----------|------|
| –í–∏–¥–∂–µ—Ç | `widget_instances` | `system_prompt` |
| Telegram –±–æ—Ç | `bot_instances` | `system_prompt` |
| WhatsApp –±–æ—Ç | `whatsapp_instances` | `system_prompt` |
| –ß–∞—Ç-—Å–µ—Å—Å–∏—è | `chat_sessions` | `system_prompt` |

### –ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ

| –ö–∞–Ω–∞–ª | –ü—É—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ |
|-------|---------------|
| **–í–∏–¥–∂–µ—Ç** | Widget ‚Üí –≤—ã–±—Ä–∞—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Üí –≤–∫–ª–∞–¥–∫–∞ AI ‚Üí System Prompt |
| **Telegram –±–æ—Ç** | Telegram ‚Üí –≤—ã–±—Ä–∞—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Üí System Prompt |
| **WhatsApp –±–æ—Ç** | WhatsApp ‚Üí –≤—ã–±—Ä–∞—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Üí System Prompt |
| **–ß–∞—Ç-—Å–µ—Å—Å–∏—è** | Chat ‚Üí –æ—Ç–∫—Ä—ã—Ç—å —Å–µ—Å—Å–∏—é ‚Üí –∏–∫–æ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (‚öô) ‚Üí System Prompt |

### –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ

```python
# app/routers/chat.py:309-311
custom_prompt = widget.get("system_prompt")    # ‚Üê –ø—Ä–æ–º–ø—Ç –≤–∏–¥–∂–µ—Ç–∞/–±–æ—Ç–∞

default_prompt = custom_prompt                  # ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—Å–ª–∏ –µ—Å—Ç—å
if not default_prompt:
    default_prompt = active_llm.get_system_prompt()  # ‚Üê –∏–Ω–∞—á–µ –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã
```

–ï—Å–ª–∏ –ø–æ–ª–µ `system_prompt` —É –≤–∏–¥–∂–µ—Ç–∞/–±–æ—Ç–∞ **–ø—É—Å—Ç–æ–µ** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã. –ï—Å–ª–∏ **–∑–∞–ø–æ–ª–Ω–µ–Ω–æ** ‚Äî –ø–µ—Ä—Å–æ–Ω–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.

### –ü—Ä–∏–º–µ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞

```
–¢—ã ‚Äî –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ "–¶–≤–µ—Ç—ã24". –ü–æ–º–æ–≥–∞–π –∫–ª–∏–µ–Ω—Ç–∞–º
–≤—ã–±—Ä–∞—Ç—å –±—É–∫–µ—Ç, –æ—Ñ–æ—Ä–º–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É –∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –Ω–∞–ª–∏—á–∏–∏.
–ë—É–¥—å –≤–µ–∂–ª–∏–≤–æ–π –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–π —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã (–æ—Ç–∫—Ä—ã—Ç–∫–∏, –≤–∞–∑—ã).
```

---

## 3. Wiki RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è **–≤ –∫–æ–Ω–µ—Ü** –ª—é–±–æ–≥–æ system prompt –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

```python
# app/routers/chat.py:314-318
wiki_rag = container.wiki_rag_service
if wiki_rag and default_prompt and msg_request.content:
    wiki_context = wiki_rag.retrieve(msg_request.content, top_k=3)
    if wiki_context:
        default_prompt = f"{default_prompt}\n\n{wiki_context}"
```

### –§–æ—Ä–º–∞—Ç –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```
[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ:]

## –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ (–∏–º—è_—Ñ–∞–π–ª–∞)
–¢–µ–ª–æ —Å–µ–∫—Ü–∏–∏ –∏–∑ wiki-pages/*.md ...

## –î—Ä—É–≥–∞—è —Å–µ–∫—Ü–∏—è (–¥—Ä—É–≥–æ–π_—Ñ–∞–π–ª)
–ï—â—ë —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç ...
```

### –ì–¥–µ —É–ø—Ä–∞–≤–ª—è—Ç—å

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí Fine-tune ‚Üí Cloud AI** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫, –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [[Cloud-AI-Training]].

---

## 4. –ü—Ä–æ–º–ø—Ç—ã –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ (Sales)

Telegram-–±–æ—Ç—ã —Å –≤–æ—Ä–æ–Ω–∫–æ–π –ø—Ä–æ–¥–∞–∂ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–ø—Ç–æ–≤ ‚Äî –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –≤–æ—Ä–æ–Ω–∫–∏.

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è

| –ú–µ—Å—Ç–æ | –§–∞–π–ª |
|-------|------|
| **–ë–î** (—Ç–∞–±–ª–∏—Ü–∞ `bot_agent_prompts`) | `db/models.py` ‚Üí `BotAgentPrompt` |
| **Python-–∫–æ–¥** (seed) | `db/models.py:2139-2341` ‚Üí `DEFAULT_AGENT_PROMPTS` |

### –ö–ª—é—á–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

| `prompt_key` | –ù–∞–∑–≤–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|-------------|----------|-------------------|
| `welcome` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ | –ü—Ä–∏ `/start`, –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `diy_techie` | DIY ‚Äî –¢–µ—Ö–Ω–∞—Ä—å | –ü–æ—Å–ª–µ –∫–≤–∏–∑–∞, —Å–µ–≥–º–µ–Ω—Ç ¬´—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞¬ª |
| `basic_busy` | Basic ‚Äî –ó–∞–Ω—è—Ç–æ–π | –°–µ–≥–º–µ–Ω—Ç ¬´–≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ¬ª |
| `custom_business` | Custom ‚Äî –ë–∏–∑–Ω–µ—Å | –°–µ–≥–º–µ–Ω—Ç ¬´–∫–∞—Å—Ç–æ–º–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è¬ª |
| `faq_answer` | FAQ –æ—Ç–≤–µ—Ç | –¢–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
| `hardware_audit` | –ê—É–¥–∏—Ç –∂–µ–ª–µ–∑–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ GPU |
| `roi_calculator` | ROI –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä | –†–∞—Å—á—ë—Ç —ç–∫–æ–Ω–æ–º–∏–∏ vs SaaS |
| `discovery_summary` | –ò—Ç–æ–≥ discovery | –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ |
| `objection_price` | –í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –¥–æ—Ä–æ–≥–æ | –†–∞–±–æ—Ç–∞ —Å —Ü–µ–Ω–æ–≤—ã–º –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–µ–º |
| `objection_nogpu` | –í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ: –Ω–µ—Ç GPU | –í–∞—Ä–∏–∞–Ω—Ç—ã –±–µ–∑ GPU |
| `followup_gentle` | Follow-up –º—è–≥–∫–∏–π | –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
| `pr_comment` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ PR | AI-—Å–∞–º–º–∞—Ä–∏ –¥–ª—è GitHub PR |
| `pr_news` | –ù–æ–≤–æ—Å—Ç—å –æ PR | Telegram-—Ä–∞—Å—Å—ã–ª–∫–∞ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ |
| `general_chat` | –°–≤–æ–±–æ–¥–Ω—ã–π —á–∞—Ç | –û–±—â–µ–Ω–∏–µ –≤–Ω–µ –≤–æ—Ä–æ–Ω–∫–∏ |

### –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ–≥–º–µ–Ω—Ç–∞–º

–¢–∞–±–ª–∏—Ü–∞ `bot_segments` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏: –ø–æ –æ—Ç–≤–µ—Ç–∞–º –∫–≤–∏–∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–µ–≥–º–µ–Ω—Ç (`diy`, `basic`, `custom`), –∏ –∫–∞–∂–¥–æ–º—É —Å–µ–≥–º–µ–Ω—Ç—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è `agent_prompt_key` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–º–ø—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `bot_agent_prompts`.

### –ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí Telegram ‚Üí –≤—ã–±—Ä–∞—Ç—å –±–æ—Ç ‚Üí –≤–∫–ª–∞–¥–∫–∞ Sales ‚Üí Agent Prompts**

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
- –¢–µ–∫—Å—Ç system prompt
- Temperature
- Max tokens

### API

```
GET    /admin/bots/{bot_id}/sales/prompts              # –°–ø–∏—Å–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤ –±–æ—Ç–∞
POST   /admin/bots/{bot_id}/sales/prompts              # –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç
PUT    /admin/bots/{bot_id}/sales/prompts/{prompt_id}  # –û–±–Ω–æ–≤–∏—Ç—å
DELETE /admin/bots/{bot_id}/sales/prompts/{prompt_id}  # –£–¥–∞–ª–∏—Ç—å
```

---

## 5. –ü—Ä–æ–º–ø—Ç—ã Action Buttons (Telegram)

–ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã Telegram-–±–æ—Ç–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π system prompt.

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `action_buttons` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ JSON-–ø–æ–ª–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞ (`BotInstance.config`). –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏: `db/models.py:916-1045` ‚Üí `DEFAULT_ACTION_BUTTONS`.

### –ö–Ω–æ–ø–∫–∏ —Å–æ —Å–≤–æ–∏–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏

| –ö–Ω–æ–ø–∫–∞ | –ü—Ä–æ–º–ø—Ç |
|--------|--------|
| **‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å** | AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞, –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ |
| **üìã –°–æ—Å—Ç–∞–≤–∏—Ç—å –¢–ó** | –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π |

–û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (üì¶ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, üí≥ –û–ø–ª–∞—Ç–∞, üõ† –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞, üìö Wiki, ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ) –∏–º–µ—é—Ç `system_prompt: null` ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ–º–ø—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –¥–µ–π—Å—Ç–≤–∏–µ –±–µ–∑ LLM.

### –ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí Telegram ‚Üí –≤—ã–±—Ä–∞—Ç—å –±–æ—Ç ‚Üí –≤–∫–ª–∞–¥–∫–∞ Action Buttons**

–î–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å:
- LLM Backend (–æ—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ)
- System Prompt (–ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º–ø—Ç –±–æ—Ç–∞)
- LLM Params (temperature, max_tokens)

---

## 6. –ü—Ä–æ–º–ø—Ç –æ–±–ª–∞—á–Ω–æ–≥–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–û–±–ª–∞—á–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Å–≤–æ–π system prompt –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è

–ü–æ–ª–µ `config` (JSON) —Ç–∞–±–ª–∏—Ü—ã `cloud_llm_providers` ‚Üí –∫–ª—é—á `system_prompt`.

```python
# cloud_llm_service.py:598
self.system_prompt = provider_config.get("system_prompt", "")
```

### –ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí LLM ‚Üí Cloud Providers ‚Üí –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä ‚Üí Config (JSON)**

–≠—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ `CloudLLMService` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é (OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API `/v1/chat/completions`). –í —á–∞—Ç–µ/–≤–∏–¥–∂–µ—Ç–∞—Ö/–±–æ—Ç–∞—Ö –æ–Ω –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–º–ø—Ç–æ–º –ø–µ—Ä—Å–æ–Ω—ã –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º –∫–∞–Ω–∞–ª–∞.

---

## –ò—Ç–æ–≥–æ–≤–∞—è –∫–∞—Ä—Ç–∞: —á—Ç–æ –∫—É–¥–∞ –ø–æ–ø–∞–¥–∞–µ—Ç

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  LLM –ø–æ–ª—É—á–∞–µ—Ç:                   ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  system: {prompt} + {wiki_rag_context}           ‚îÇ
‚îÇ  user: —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                    ‚îÇ
‚îÇ  history: –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

{prompt} –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–≤–∏–¥–∂–µ—Ç/–±–æ—Ç/—Å–µ—Å—Å–∏—è)          ‚îÇ
‚îÇ    ‚Üí widget_instances.system_prompt              ‚îÇ
‚îÇ    ‚Üí bot_instances.system_prompt                 ‚îÇ
‚îÇ    ‚Üí whatsapp_instances.system_prompt            ‚îÇ
‚îÇ    ‚Üí chat_sessions.system_prompt                 ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ 2. –ï—Å–ª–∏ –ø—É—Å—Ç–æ–π ‚Üí –ø—Ä–æ–º–ø—Ç –ø–µ—Ä—Å–æ–Ω—ã                 ‚îÇ
‚îÇ    ‚Üí llm_presets.system_prompt (–∏–∑ –ë–î)           ‚îÇ
‚îÇ    ‚Üí SECRETARY_PERSONAS (fallback –∏–∑ –∫–æ–¥–∞)       ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ 3. Wiki RAG ‚Üí –í–°–ï–ì–î–ê –≤ –∫–æ–Ω–µ—Ü                     ‚îÇ
‚îÇ    ‚Üí wiki_rag.retrieve(—Å–æ–æ–±—â–µ–Ω–∏–µ, top_k=3)       ‚îÇ
‚îÇ    ‚Üí "\n\n[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ:]\n..."          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

–í–∏–¥–∂–µ—Ç ¬´–ü–æ–¥–¥–µ—Ä–∂–∫–∞¬ª —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º + Wiki RAG:

```
–¢—ã ‚Äî –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏ X. –ü–æ–º–æ–≥–∞–π –∫–ª–∏–µ–Ω—Ç–∞–º
—Ä–µ—à–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç–∞.

[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ:]

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Installation)
Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
cp .env.docker.example .env && docker compose up -d

## –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (Installation)
URL: http://localhost:8002/admin/
–õ–æ–≥–∏–Ω: admin / –ü–∞—Ä–æ–ª—å: admin
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –ø–µ—Ä—Å–æ–Ω—ã** ‚Äî –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç –ê–Ω–Ω—ã/–ú–∞—Ä–∏–Ω—ã –ø–æ–¥ —Å–≤–æ–π –±–∏–∑–Ω–µ—Å (LLM ‚Üí –ü–µ—Ä—Å–æ–Ω—ã)
2. **–î–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤** ‚Äî –∑–∞–¥–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∏–¥–∂–µ—Ç–∞/–±–æ—Ç–∞, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π —Å—Ç–∏–ª—å
3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** ‚Äî Wiki RAG –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç –ª—é–±–æ–π –ø—Ä–æ–º–ø—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –≤–∞—à–∏—Ö `.md` —Ñ–∞–π–ª–æ–≤
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–∞—Ç –≤ –∞–¥–º–∏–Ω–∫–µ –∏–ª–∏ —Ç–µ—Å—Ç-–≤–∏–¥–∂–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è
5. **–ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ** ‚Äî –Ω–µ –∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ wiki-pages –≤ –ø—Ä–æ–º–ø—Ç; RAG —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

‚Üê [[Personas]] | [[Wiki-RAG]] ‚Üí
